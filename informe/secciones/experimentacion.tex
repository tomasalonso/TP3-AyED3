% Para cada generación tomamos la media y la varianza de los puntajes de todos los individuos. Creemos que es bueno tener un genoma que provenga de una generación cuya varianza sea baja, ya que esto significaría que los

A lo largo de toda la experimentación nos encontramos con el problema de que los resultados de los partidos llegaban a depender
fuertemente del lado que tenia cada equipo, no pudimos concluir por que sucedía esto exactamente y no disponemos del tiempo
para revisar en profundidad el código, creemos que el error yace en el tablero en si (como implementamos las reglas del juego),
 o en la función evaluadora de jugadas la cual puntúa distinto según el lado, lo cual no debería suceder.
 esto fue tomado en cada una de las secciones siguientes para poder sortear los problemas que nos traía de la mejor forma posible.


A parte de esto, se ecuentran por lo general buenos comportamientos de juego de algunos equipos.

\subsection{Genético}


Iniciamos nuestra experimentación con el algoritmo genético.
Tuvimos grandes complicaciones para experimentar con las distintas funciones de selección y crossover implementadas, pues constantemente encontramos errores o comportamientos no deseados en los partidos.
Por ejemplo, nos dimos cuenta de que se llegaba a un momento en que los jugadores maximizaban el aŕea ocupada por su equipo y estaban muy cerca del rival, pero la pelota se encontraba sola y nadie iba a buscarla.
Agregamos entonces el genoma que relaciona a los jugadores con su distancia a la pelota, para que tuvieran una mejor visión del campo de juego, y quitamos el que mide el área cubierta por los jugadores de un mismo equipo.
No se presenta en detalle en este informe, pero se observan mejoras respecto a esa situación: los jugadores ya no se quedan trabados, sino que en casi todo momento alguno tiene la pelota.

Una gran barrera también fue el tiempo, pues aumenta muy rápidamente al agrandar las poblaciones.
Consideramos entonces una población de 15 individuos y 30 generaciones. A esto se le agregan los parámetros 0,2 y 0,4 como fracción de selección y probabilidad de mutación respectivamente (explicadas en la Sección \ref{genetico-seleccion}).
En cuanto a parámetros del juego en sí, tenemos un tablero de $5\times10$ y tiempo 70.
Fijamos las posiciones iniciales de los jugadores de manera simétrica, intentando tener la menor cantidad de diferencias entre los que comiencen de un lado y de otro.
Dada la cantidad de funciones distintas que implementamos para un mismo fin, como dos de selección de individuos, dos de crossover de genomas y dos de mutaciones, realizar todas las posibles combinaciones fue temporalmente inviable. Siguiendo el espíritu futbolísitico del trabajo, decidimos diagramar un pequeño ``torneo'' de funciones. En el mismo pensamos comparar cada tipo de función, partiendo de una combinación arbitraria, y observar el partido entre los equipos resultantes. El equipo ganador determinará qué función se utilizará en la siguiente instancia. Los genomas resultantes pueden verse y probarse en el archivo \texttt{tp3.cpp}.



% \todo[inline]{VER POR QUÉ CAMBIA EL RESULTADO DE LOS PARTIDOS DEPENDIENDO DEL LADO EN QUE EMPIECEN}

\subsubsection*{Crossover: Bloques vs. Aleatorio (6 (Izq) - 4(Der))}

\textbf{Funciones usadas: } fitness$\_$puntos, seleccion$\_$por$\_$cantidad, mutacion$\_$A.


% Genoma bloque:-0.775167, -0.268792, -0.904803, 0.509839, 0.0429661, -0.749711, -0.330696, -0.72851, 0.402388, -0.690626, -0.925932, -0.548266, -0.311845, 0.474691, 0.0257145, 0.784108, -0.86784, -0.262816, 0.852761, -0.65904, 0.515403, 0.490343, 0.458956, -0.679425, -0.982449, -0.845339, 0.519684, 0.749116, 0.0456578, 0.550204, 0.0943544

% Genoma random: -0.709169, 0.36851, -0.520018, 0.6342, -0.0282138, 0.322789, -0.616418, -0.854534, -0.545993, 0.164261, 0.16543, 0.492899, -0.592142, -0.209919, -0.923623, 0.584831, 0.381569, -0.133004, -0.995532, -0.254421, 0.639068, 0.0105143, 0.494118, -0.125545, -0.821469, -0.731869, 0.141382, 0.793763, 0.388867, 0.428832, 0.170146

Los equipos no tienen mucho problema para anotar goles, aunque sí para robar la pelota.
Si bien ambos tienen un jugador que se queda en una esquina parado, en cada oportunidad que un equipo tiene la pelota logra meter un gol, con algún oponente marcando de cerca.
Sucede dos veces que el equipo izquierdo (el generado por crossover en bloques) logra robar la pelota y arruinar los planes de gol del equipo contrario. De esta manera logra sacar dos puntos de diferencia.


\subsubsection*{Fitness: Puntos (torneo) vs. Diferencia de goles (4 (Izq) - 2(Der))}

\textbf{Funciones usadas: } seleccion$\_$por$\_$cantidad, crossover$\_$BLOQUES, mutacion$\_$A.

% Genoma puntaje: -0.0912428, 0.441283, 0.526057, -0.24552, -0.495963, -0.44873, -0.994717, -0.158943, 0.652438, 0.664869, 0.230037, 0.374349, -0.995683, 0.800342, -0.515715, 0.741213, 0.356681, 0.0936855, -0.615283, -0.43112, 0.101387, 0.222677, -0.500011, 0.0475549, -0.874837, 0.190928, -0.818234, 0.50323, 0.514024, 0.230156

% Genoma dif_goles: 0.0354922, -0.347757, -0.00128968, -0.454219, -0.352621, -0.698883, -0.959573, -0.730346, -0.451026, -0.855564, -0.898217, 0.594382, -0.377874, -0.126251, -0.297974, 0.196175, 0.964436, -0.592206, -0.578612, 0.277421, -0.015946, -0.471911, -0.019213, -0.182925, -0.847654, -0.218569, 0.730436, 0.622654, 0.912127, 0.818418

A diferencia del partido anterior, se observan muchas jugadas frustradas por quites.
Se ve también que el jugador que tiene la pelota siempre está marcado por un oponente, lo cual está íntimamente relacionado con la gran cantidad de quites ocurridos.
Fue un partido muy emocionante, ya que además hubo pases.
Una estrategia muy repetida del equipo izquierdo (el generado con fitness$\_$puntos) fue sacarle la pelota al oponente bien cerca de su propio arco y hacer un pase a un jugador que estaba cerca.
El mismo se encargaba luego de llevar la pelota hasta la otra punta de la cancha y meter gol.\\

Observamos que los equipos y sus jugadas van mejorando a medida que avanza este torneo: más quites, pases entre jugadores, algunos que marcan y en este partido no hubo jugadores que se quedaran quietos o que alternaran entre dos posiciones contiguas.
Por esto creemos que lograremos un equipo relativamente bueno para el final de las comparaciones.



\subsubsection*{Selección: Cantidad vs. Puntaje (4 (Izq) - 3(Der))}
\textbf{Funciones usadas: } fitness$\_$puntos, crossover$\_$BLOQUES, mutacion$\_$A,.

En este partido se ven muchos quites también, pero resalta en ambos equipos que las jugadas son llevadas a cabo por un único jugador.
Los demás raramente se mueven, aunque uno de los del equipo izquierdo estuvo donde tenía que estar para quitar la pelota al oponente, evitar un gol y pasársela a su compañero goleador.

Nos gustaría decir que seleccionando los individuos por una cantidad fija se logra mayor estabilidad en la estrategia de juego, pero ambos equipos tienen un comportamiento muy parecido: un único jugador muy activo que se encarga de anotar goles, quitar la pelota y marcar al oponente. Atribuimos la victoria del equipo izquierdo en gran parte al azar, pero esto es suficiente para que la combinación de funciones utilizadas para generarlo pasen a la siguiente instancia.

\subsubsection*{Mutación: Aleatorio vs. Valor opuesto ( - )}
\textbf{Funciones usadas: } fitness$\_$puntos, seleccion$\_$por$\_$cantidad, crossover$\_$BLOQUES.

----------------------------------------------------------------------------------------------------------------------------------
\todo[inline]{COSAS A MENCIONAR}
\begin{itemize}
    \item fijarse qué pasa con más iteraciones
    \item ver que pasa con mutacionA y mutacion B // mutación A tardó 41 minutos!!
\end{itemize}

% Tenencia de la pelota, se quedaban quietos porque no había beneficios por ir a buscar la pelota -> agregamos un gen que te da beneficio por tener la pelota

Gol siempre, si se implementaran más metricas como gol seguro, chance que la intercepten, etc. seria mejor

% Decir por qué agregamos cada genoma que inicialmente no estaba

% distJugador al arco, antes no había ninguna información que vinculara a los jugadores con la posición de la pelota

% por ejemplo agregamos puntaje si una jugada mete gol para que siempre metan gol

Pesos negativos para sacarle penalizar una acción (para no duplicar genomas)-> agregar valores negativos al genoma

% Partidos muy variados, entre que algunos son ajustados y con muchos robos, otros se meten gol siempre. O se quedan estáticos y no se mueven más.

Forzar que si el jugador con la mínima distancia a la pelota, achica esa distancia cuando la pelota está quieta, suma puntaje

Contador de tiempo desde que la pelota se quedó quieta

% Equilibrios en el tablero donde ningún movimiento suma puntaje



\subsection{Grid-Search}

La experimentación con \emph{Grid-Search} se basó en usar \emph{GRASP} ya que \emph{búsqueda local} es solo un caso particular
de correr \emph{GRASP} en una sola iteracion.
Primero se corrieron experimentos cortos para probar la efectividad del algoritmo y se obtuvieron equipos relativamente buenos,
a pesar de algunas problemáticas presentadas por el juego y la función evaluadora ademas de los genomas en principio defectuosos,
estos jugaban y metian goles.\\

Luego, cuando se llego a una versión final del juego, nos encontramos con que el algoritmo, al generar los vecinos, nos generaba también
el vecino anterior del que venia, esto junto con que también descubrimos que el resultado de los partidos dependía del lado en el
que se jugaba, causo lo que seguro iba a pasar, el algoritmo se quedaba saltando entre $2$ vecinos que se ganaban mutuamente y no
salia de ese ciclo.
Para evitar esto se decidió no generar el vecino del que se venia. Esta solución es parcial y no es la mejor, pero como se dijo primero,
no encontramos el error original y esta solución nos permitió seguir avanzando con el proceso de \emph{GRASP}.\\


La experimentación de este procedimiento no es muy variada ya que solo consiste en dar una cantidad de iteraciones y dejar que
busque localmente varios resultados para luego hacerlos competir, se puede decir que el tiempo que tarda en encontrar
cada resultado es corto, no pasa por lo general de entre $1$ minuto y $5$ minutos y como máximo ha llegado a tardar $10$ minutos, sin tener en cuenta
los diversos casos en los que no terminaba.


Se corrió un grasp de 50 iteraciones con la ultima versión y el genoma encontrado es el utilizada para competir contra el mejor que se logro encontrar
corriendo el genético. No se encuentra mucha mas experimentación que esta ya que el concepto bajo el que trabaja \emph{GRASP}
es simple y no presenta muchas posibilidades de variación en su idea para compararlas, lo primero que se ocurre para realizar
experimentación es un cambio en la vecindad utilizada para buscar localmente pero no hemos logrado diseñarla por cuestiones
de tiempo y priorizacion del método genético, sin embargo
creemos que la propuesta es una buena decisión que ademas fue discutida con un profesor.
